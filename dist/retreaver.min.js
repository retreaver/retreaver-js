/*! retreaver v0.2.27 | 2025-10-02 */
if(function(e){var t={configure:function(e){var r={addr:e.host,http_prefix:"http",urlregex:"/\\/\\/[^\\/]*\\/(.*)/"};void 0!==e.prefix&&(r.http_prefix=e.prefix),window.Retreaver._connection=new t.Base.Request(r)}};e.Retreaver=t}(window),function(){void 0===window.Retreaver&&(window.Retreaver={});var e={};e.assert_required_keys=function(){for(var e=Array.prototype.slice.call(arguments),t=e.shift(),r=0;r<e.length;r++){var n=e[r];if(void 0===t||void 0===t[n])throw"ArgumentError: Required keys are not defined: "+e.join(", ")}return t},e.merge=function(t,r){for(var n in r)try{r[n].constructor==Object?t[n]=e.merge(t[n],r[n]):t[n]=r[n]}catch(e){t[n]=r[n]}return t},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.ieVersion=function(){return null==e._ieVersion&&(e._ieVersion=function(){for(var e=3,t=document.createElement("div"),r=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",r[0];);return e>4&&e}()),6!=e._ieVersion&&7!=e._ieVersion||null==Retreaver.easyxdm_loaded&&(Retreaver.easyxdm_loaded=!1),e._ieVersion},Retreaver.Base=e}(),function(e){var t=function(e,r,n){return 1===arguments.length?t.get(e):t.set(e,r,n)};t._document=document,t._navigator=navigator,t.defaults={path:"/"},t.get=function(e){return t._cachedDocumentCookie!==t._document.cookie&&t._renewCache(),t._cache[e]},t.set=function(e,r,n){return n=t._getExtendedOptions(n),t._document.cookie=t._generateCookieString(e,r,n),t},t._getExtendedOptions=function(r){return{path:r&&r.path||t.defaults.path,domain:r&&r.domain||t.defaults.domain,secure:r&&r.secure!==e?r.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._generateCookieString=function(e,t,r){return e=encodeURIComponent(e),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),r=r||{},e=e+"="+t+(r.path?";path="+r.path:""),e+=r.domain?";domain="+r.domain:"",e+=r.secure?";secure":""},t._getCookieObjectFromString=function(r){var n={};r=r?r.split("; "):[];for(var a=0;a<r.length;a++){var i=t._getKeyValuePairFromCookieString(r[a]);n[i.key]===e&&(n[i.key]=i.value)}return n},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("="),t=0>t?e.length:t;return{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},t._renewCache=function(){t._cache=t._getCookieObjectFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){return t._navigator.cookieEnabled||"1"===t.set("cookies.js",1).get("cookies.js")},t.enabled=t._areEnabled(),"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.Cookies=t),Retreaver.Base.Cookies=t}(),function(){var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};Base64.encode=function(e){var t,r,n,a,i,o,s,c="",u=0;for(e=Base64._utf8_encode(e);u<e.length;)t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u++),a=t>>2,i=(3&t)<<4|r>>4,o=(15&r)<<2|n>>6,s=63&n,isNaN(r)?o=s=64:isNaN(n)&&(s=64),c=c+Base64._keyStr.charAt(a)+Base64._keyStr.charAt(i)+Base64._keyStr.charAt(o)+Base64._keyStr.charAt(s);return c},Base64.decode=function(e){var t,r,n,a,i,o,s,c="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)a=Base64._keyStr.indexOf(e.charAt(u++)),i=Base64._keyStr.indexOf(e.charAt(u++)),o=Base64._keyStr.indexOf(e.charAt(u++)),s=Base64._keyStr.indexOf(e.charAt(u++)),t=a<<2|i>>4,r=(15&i)<<4|o>>2,n=(3&o)<<6|s,c+=String.fromCharCode(t),64!=o&&(c+=String.fromCharCode(r)),64!=s&&(c+=String.fromCharCode(n));return c=Base64._utf8_decode(c)},Base64._utf8_encode=function(string){string=string.replace(eval("/\\r\\n/g"),eval("String('\\n')"));for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext},Base64._utf8_decode=function(e){for(var t="",r=0,n=0,a=0,i=0;r<e.length;)n=e.charCodeAt(r),n<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(a=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&a),r+=2):(a=e.charCodeAt(r+1),i=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&i),r+=3);return t},Retreaver.Base.Base64=Base64}(),function(){var e=Retreaver.Base,t=function(t){var r=this;r.get=function(){var e={};if(void 0===arguments[0])e=Retreaver.Base.Data._store[t.type][t.primary_key];else if(1===arguments.length)e=Retreaver.Base.Data._store[t.type][t.primary_key][arguments[0]];else for(var r=0;r<arguments.length;r++){var n=arguments[r];e[n]=Retreaver.Base.Data._store[t.type][t.primary_key][n]}return e},r.set=function(e,r){return Retreaver.Base.Data._store[t.type][t.primary_key][e]=r,r},r.merge=function(e){for(var r in e)Retreaver.Base.Data._store[t.type][t.primary_key][r]=e[r];return e},function(){e.assert_required_keys(t,"type","primary_key"),void 0===Retreaver.Base.Data._store[t.type]&&(Retreaver.Base.Data._store[t.type]={}),void 0===Retreaver.Base.Data._store[t.type][t.primary_key]&&(Retreaver.Base.Data._store[t.type][t.primary_key]={})}()};t._store={},Retreaver.Base.Data=t}(),function(){var e=Retreaver.Base,t=Retreaver.Base.Data,r=function(){this.api_host_uri="/api/v1/",this.type="model",this.primary_key=function(e){return r.primary_key(this.type,e)},this.store=function(e){if(void 0!==e){var t=this.primary_key();if(void 0===e[t])throw"ArgumentError: Expected to receive primary_key "+t;void 0===this._store&&(this._store=new Retreaver.Base.Data({type:this.type,primary_key:e[t]})),this._store.merge(e),r.update_visitor_id(e)}return this._store},this.get_data=function(e,t){return this.connection().getJSON(this.api_host_uri+e,null,[r.update,t],this)},this.post_data=function(e,t,n){return this.connection().postJSON(this.api_host_uri+e,t,[r.update,n],this)},this.set=function(){return"function"==typeof this["set_"+arguments[0]]&&(arguments[1]=this["set_"+arguments[0]].apply(this,[arguments[1]])),this._store.set.apply(this,arguments)},this.get=function(){return this._store.get.apply(this,arguments)},this.connection=function(){return Retreaver.Base.Request.connection()}};r.inflections={number:"numbers",campaign:"campaigns"},r.update=function(n){for(var a in n){var i=a,o=n[a];if(void 0!==r.inflections[a]&&(i=r.inflections[a]),void 0!==t._store[i])if(e.isArray(o))for(var s=0;s<o.length;s++)r.update_record(i,o[s]);else r.update_record(i,o[s])}return n},r.update_record=function(e,t){if(r.update_visitor_id(t),void 0!==t.id){var n=r.primary_key(e);for(var a in t)Retreaver.Base.Data._store[e][t[n]][a]=t[a];return!0}return!1},r.update_visitor_id=function(e){void 0!==e&&void 0!==e.visitor_id&&Retreaver.Base.Cookies.set("CallPixels-vid",e.visitor_id)},r.primary_key=function(e,t){return void 0===r.primary_keys&&(r.primary_keys={}),void 0===r.primary_keys[e]&&(r.primary_keys[e]="id"),void 0!==t&&(r.primary_keys[e]=t),r.primary_keys[e]},Retreaver.Base.Model=r}(),function(){var Base=window.Retreaver.Base,Cookies=window.Retreaver.Base.Cookies,Request=function(options){function initialize(e){config=Base.assert_required_keys(e,"http_prefix","addr","urlregex")}function with_ie_scripts(e){Retreaver.easyxdm_loaded?e():self.loadScript(http_prefix+"://cdn.jsdelivr.net/easyxdm/2.4.17.1/easyXDM.min.js",function(){self.loadScript(http_prefix+"://cdn.jsdelivr.net/easyxdm/2.4.17.1/json2.js",function(){Retreaver.easyxdm_loaded=!0,e()})})}var self=this,config={};self.getJSON=function(e,t,r,n){"function"==typeof r&&(r=[r]),void 0===n&&(n=self);var a=function(){self.apiRequest(e,function(e){var t=JSON.parse(e);for(var a in r)"function"==typeof r[a]&&r[a].apply(n,[t])},t)};6==Base.ieVersion()||7==Base.ieVersion()?with_ie_scripts(a):a()},self.postJSON=function(){return self.getJSON.apply(this,arguments)},self.apiRequest=function(request_uri,callbackFunctions,payload){function ignored(){}function runCallbacks(e){for(var t in callbackFunctions)"function"==typeof callbackFunctions[t]&&callbackFunctions[t](e)}function forwardResponse(){runCallbacks(xdr.responseText)}function sendXdm(){var remote=http_prefix+"://"+addr+"/ie_provider",swf=http_prefix+"://"+addr+"/easyxdm.swf",rpc=eval('new window.easyXDM.Rpc({ remote: "'+remote+'", swf: "'+swf+'"},{remote: {request: {}}});');rpc.request({url:"/"+request_url.match(urlregex)[1],method:"POST",data:payload},function(e){runCallbacks(e.data)})}var http_prefix=config.http_prefix,addr=config.addr,urlregex=eval(config.urlregex),request_url=http_prefix+"://"+addr+request_uri;if(payload&&void 0!==Cookies.get("CallPixels-vid")&&"null"!==Cookies.get("CallPixels-vid")&&(payload.visitor_id=Cookies.get("CallPixels-vid")),"function"==typeof callbackFunctions&&(callbackFunctions=[callbackFunctions]),window.XDomainRequest){var xdr=new XDomainRequest;xdr.onload=forwardResponse,xdr.onprogress=ignored,xdr.onerror=ignored,xdr.ontimeout=ignored,xdr.timeout=3e4,payload?(xdr.open("post",request_url),xdr.send(self.buildPost(payload))):(xdr.open("get",request_url),xdr.send())}else if(6==Base.ieVersion()||7==Base.ieVersion())with_ie_scripts(sendXdm);else{var request=new XMLHttpRequest;request.onload=function(){runCallbacks(this.responseText)},payload?(request.open("POST",request_url),request.setRequestHeader("Content-Type","application/json"),request.send(JSON.stringify(payload))):(request.open("GET",request_url),request.send())}},self.buildPost=function(e){var t="";for(var r in e)t+=r+"="+e[r]+"&";return t},self.loadScript=function(e,t){var r=document.getElementsByTagName("script")[0],n=document.createElement("script");n.type="text/javascript",n.async=!1,n.src=e;var a=function(e,t){"loaded"==e.readyState||"complete"==e.readyState?t():setTimeout(function(){a(e,t)},100)};"function"==typeof t&&(void 0!==n.addEventListener?n.addEventListener("load",t,!1):n.onreadystatechange=function(){n.onreadystatechange=null,a(n,t)}),r.parentNode.insertBefore(n,r)},initialize(options),self.config=config};Request.connection=function(){if(void 0===window.Retreaver._connection){var e=window.location.protocol.replace(":","");window.Retreaver._connection=new Retreaver.Base.Request({addr:"api.rtvrapi.com",http_prefix:e,urlregex:"/\\/\\/[^\\/]*\\/(.*)/"})}return window.Retreaver._connection},Retreaver.Base.Request=Request}(),function(){function tags_to_script_tags(e){var t="";for(var r in e){t=t+"&"+r+"="+e[r]}return t}var Base=Retreaver.Base,Cookies=Retreaver.Base.Cookies,Base64=Retreaver.Base.Base64,Request=Retreaver.Base.Request,RequestNumber=function(options){function initialize(e){config=Base.assert_required_keys(e,"campaign_key")}function getParts(e){for(var t={},r=0;r<e.length;r++){var n=getUrlParts(e[r]);for(var a in n)t[a]=n[a]}return t}function getUrlParts(url){var objURL=new Object;try{url=url.match(eval("/\\?(.*)/"))[0]}catch(e){return objURL}return url.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,r,n){objURL[t.toLowerCase()]=n}),objURL}function getGACookies(){var e=["__utma","__utmb","__utmc","__utmz","__utmv"],t=new Object;for(var r in e){var n=extractCookie(e[r]);if(!(n||r>0))break;n&&(t[e[r]]=n)}return t}function extractCookie(e){var t=new RegExp(e+"=([^;]*)","g");try{return t.exec(document.cookie)[1]}catch(e){return!1}}function findOne(e,t){for(var r in t)for(var n in e)if(n==t[r])return e[n];return!1}var self=this,config={},resource_url="/api/v1/numbers?";self.perform=function(callback){function sendGARequest(e,t){request_ran||(request_ran=!0,body.ga=Base64.encode(e),body.c=Base64.encode(JSON.stringify(t)),Request.connection().getJSON(request_url,body,callback))}function runRequest(){request_ran||(request_ran=!0,Request.connection().getJSON(request_url,body,callback))}if("function"!=typeof callback)throw"ArgumentError: Expected to receive a callback function";var request_url=resource_url+"&campaign_key="+config.campaign_key;config.default_number_replacement&&(request_url=request_url+"&default_number="+config.default_number_replacement),config.message_replacement&&(request_url=request_url+"&message="+config.message_replacement);var body=new Object,uri=document.location.href;body.u=Base64.encode(uri),body.st=Base64.encode(tags_to_script_tags(config.number_matching_tags));var ou=Cookies.get("CallPixels-ou");getParts([document.location.href]).cpreset||!ou?Cookies.set("CallPixels-ou",body.u):body.ou=ou;var ga_acct="FAILED",request_ran=!1;window.setTimeout(runRequest,1e3);try{_gaq.push(function(){ga_acct=eval("_gat._getTrackerByName()._getAccount()"),sendGARequest(ga_acct,getGACookies())})}catch(e){try{ga(function(tracker){if(tracker&&tracker.get)try{var clientId=tracker.get("clientId"),allTrackers=eval("ga.getAll()");ga_acct=allTrackers[0].get("trackingId");var ga_cookies={};ga_cookies.__utma=clientId,ga_cookies.mp="yes",sendGARequest(ga_acct,ga_cookies)}catch(e){sendGARequest("",{})}else sendGARequest("",{})})}catch(e){runRequest()}}},initialize(options)};Retreaver.Base.RequestNumber=RequestNumber}(),window.Retreaver.Cache={},function(){function e(t){if(void 0!==Retreaver.Base.Data._store){var r=Retreaver.Base.Data._store.numbers;if(void 0!==r){var n={};for(var a in r){var i=r[a];"true"===i.is_active&&(void 0===n[i.campaign_key]&&(n[i.campaign_key]=[],n[i.campaign_key].ids=[],n[i.campaign_key].hashes=[]),n[i.campaign_key].ids.push(i.id),n[i.campaign_key].hashes.push(i.id_checksum))}for(var o in n){var s={ids:n[o].ids,hashes:n[o].hashes};Retreaver.Base.Request.connection().postJSON("/api/v1/numbers/ping",s,[Retreaver.Base.Model.update,t],this)}}}setTimeout(e,15e3)}var t=Retreaver.Base;Retreaver.Number=function(e){function r(e){return"string"==typeof e&&(e=Retreaver.Number.extract_tags_from_string(e)),{tag_values:e,ids:[n("id")],campaign_key:n("campaign_key")}}function n(e){return i.get(e)}function a(){if(!1===i.get("is_per_visitor"))throw"Error: Tried to add tags to non per-visitor number."}var i=this;i.type="numbers",i.add_tags=function(e,t){a(),i.post_data("numbers/tag",r(e),t)},i.replace_tags=function(e,t){a(),i.post_data("numbers/replace_tags",r(e),t)},i.remove_tags=function(e,t){a(),i.post_data("numbers/untag",r(e),t)},i.remove_tags_by_keys=function(e,t){a(),"string"==typeof e&&(e=e.split(","));var r={tag_keys:e,ids:[n("id")],campaign_key:n("campaign_key")};i.post_data("numbers/untag/keys",r,t)},i.clear_tags=function(e){a();var t={ids:[n("id")],campaign_key:n("campaign_key"),all:"true"};i.post_data("numbers/untag",t,e)},i.release=function(){i.set("is_active","false")},i.initiate_call=function(e,r,n){void 0===r&&(r={}),r.dial=e,r=t.merge(i.get("id","campaign_key"),r),i.post_data("numbers/initiate_call",r,n)},function(e){i.store(e),i.set("is_active","true")}(e)},Retreaver.Number.extract_tags_from_string=function(e){for(var t={},e=e.split(","),r=0;r<e.length;r++){var n=e[r].split(":");t[n[0]]=n[1]}return t},Retreaver.Number.prototype=new Retreaver.Base.Model,e()}(),function(){var e=Retreaver.Base.RequestNumber,t=function(t){function r(e){for(var t=0;t<e.length;t++){var r=e[t];Retreaver.Vendor.findAndReplaceDOMText(document.getElementsByTagName("body")[0],{find:r.find,replace:r.replace_with});for(var n=document.getElementsByTagName("a"),a=0;a<n.length;a++){var i=n[a],o=i.getAttribute("href");if(null!==o){var s=o.match(/^(tel:|clk[a-z]\/tel\/)(.*)/);s&&s[2]===r.find&&i.setAttribute("href",s[1]+r.replace_with)}}}}function n(e,t){const r=e.get("integrations");if("object"==typeof r){const n=r[t];if(void 0!==n)return n}}function a(e){if(googleAnalyticsConfig=n(e,"google_analytics"),"undefined"!=typeof googleAnalyticsConfig){new Promise(function(e){const t=setInterval(function(){const r=/_ga_[^=]+=([^;]*)/,n=document.cookie.match(r),a=n&&n[1],i=/_ga=([^;]*)/,o=document.cookie.match(i),s=o&&o[1];a&&s&&(e({gaSessionId:a,gaClientId:s}),clearInterval(t))},googleAnalyticsConfig.checkIntervalMs)}).then(function(t){e.replace_tags({ga_session_id:t.gaSessionId,ga_client_id:t.gaClientId})})}}function i(e){const t=n(e,"truecall.com");if(void 0!==t){document.getElementById("__tc_script")&&window.TrueCall||function(){const e=document.createElement("script");e.type="text/javascript",e.async=!0,e.defer=!0,e.dataset.campaign_uuid=t.tcCampaignUuid,e.dataset.use_set_did="1",e.id="__tc_script",e.src=t.scriptSrc,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();const r=setInterval(function(){window.TrueCall&&window.TrueCall.setDID(e.get("number")).then(function(){return clearInterval(r),window.TrueCall.getIdAsync()}).then(function(r){const n={};n[t.tagName]=r,e.replace_tags(n)})},t.checkIntervalMs)}}function o(e){function t(e){const t="; "+document.cookie,r=t.split("; "+e+"=");if(2==r.length)return r.pop().split(";").shift()}const r=n(e,"red_track");if(void 0!==r){new Promise(function(e){const n=setInterval(function(){const r=t("rtkclickid-store");r&&(e(r),clearInterval(n))},r.checkIntervalMs)}).then(function(t){const n={};n[r.tagName]=t,e.replace_tags(n)})}}function s(e){const t=n(e,"click_flare");if(void 0!==t){const r=function(){if(window.clickflare&&window.clickflare.data&&window.clickflare.data.event_tokens)return window.clickflare.data.event_tokens.cv_click_id||window.clickflare.data.event_tokens.cf_click_id};new Promise(function(e){const n=setInterval(function(){const t=r();t&&(e(t),clearInterval(n))},t.checkIntervalMs)}).then(function(r){const n={};n[t.tagName]=r,e.replace_tags(n)})}}var c=this;c.type="campaigns",c.primary_key("campaign_key"),c.numbers=[],c.request_number=function(t,n,u){"function"==typeof t&&(u=n,n=t,t={}),void 0===n&&(n=function(){}),void 0===t&&(t={}),c.set("number_matching_tags",t),new e(c.get("campaign_key","number_matching_tags")).perform(function(e){if(void 0!==e&&void 0!==e.number&&""!==e.number){var t=new Retreaver.Number(e.number);try{i(t)}catch(e){console.error("Could not integrate with truecall.com, ",e)}try{o(t)}catch(e){console.error("Could not integrate with Red Track, ",e)}try{a(t)}catch(e){console.error("Could not integrate with google analytics, ",e)}try{s(t)}catch(e){console.error("Could not integrate with click flare, ",e)}void 0!==e.number.replacement_numbers&&r(e.number.replacement_numbers),n.apply(c,[t])}else"function"==typeof u&&u.apply(c,[e])})},c.auto_replace_numbers=function(e,t,r){void 0===t&&(t=function(){}),void 0===r&&(r=function(){}),c.request_number(e,t,r)},c.numbers=function(){var e=[];if(void 0!==Retreaver.Base.Data._store){var t=Retreaver.Base.Data._store.numbers;if(void 0!==t)for(var r in t){var n=t[r];c.get("campaign_key")==n.campaign_key&&e.push(new Retreaver.Number(n))}}return e},c.set_number_matching_tags=function(e){if("string"==typeof e&&(e=Retreaver.Number.extract_tags_from_string(e)),!e||"object"!=typeof e||e instanceof Array)throw"ArgumentError: Expected number_matching_tags to be an object. eg: {tag: 'value'}";return e},function(e){c.store(e)}(t)};t.prototype=new Retreaver.Base.Model,Retreaver.Campaign=t}(),function(e){e.Callpixels=window.Retreaver}(window),void 0===Retreaver)var Retreaver={};void 0===Retreaver.Vendor&&(Retreaver.Vendor={}),function(e,t){e.findAndReplaceDOMText=function(){function e(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function t(){return r.apply(null,arguments)||n.apply(null,arguments)}function r(e,r,a,i,o){if(r&&!r.nodeType&&arguments.length<=2)return!1;var s="function"==typeof a;s&&(a=function(e){return function(t,r){return e(t.text,r.startIndex)}}(a));var c=n(r,{find:e,wrap:s?null:a,replace:s?a:"$"+(i||"&"),prepMatch:function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(i>0){var r=e[i];e.index+=e[0].indexOf(r),e[0]=r}return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},filterElements:o});return t.revert=function(){return c.revert()},!0}function n(e,t){return new a(e,t)}function a(e,r){var n=r.preset&&t.PRESETS[r.preset];if(r.portionMode=r.portionMode||i,n)for(var a in n)s.call(n,a)&&!s.call(r,a)&&(r[a]=n[a]);this.node=e,this.options=r,this.prepMatch=r.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}var i="retain",o=document,s={}.hasOwnProperty;return t.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1},t.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1},t.NON_INLINE_PROSE=function(e){return s.call(t.NON_CONTIGUOUS_PROSE_ELEMENTS,e.nodeName.toLowerCase())},t.PRESETS={prose:{forceContext:t.NON_INLINE_PROSE,filterElements:function(e){return!s.call(t.NON_PROSE_ELEMENTS,e.nodeName.toLowerCase())}}},t.Finder=a,a.prototype={search:function(){function t(e){for(var o=0,u=e.length;o<u;++o){var d=e[o];if("string"==typeof d){if(i.global)for(;r=i.exec(d);)s.push(c.prepMatch(r,n++,a));else(r=d.match(i))&&s.push(c.prepMatch(r,0,a));a+=d.length}else t(d)}}var r,n=0,a=0,i=this.options.find,o=this.getAggregateText(),s=[],c=this;return i="string"==typeof i?RegExp(e(i),"g"):i,t(o),s},prepMatch:function(e,t,r){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=r+e.index+e[0].length,e.startIndex=r+e.index,e.index=t,e},getAggregateText:function(){function e(n){if(3===n.nodeType)return[n.data];if(t&&!t(n))return[];var a=[""],i=0;if(n=n.firstChild)do{if(3!==n.nodeType){var o=e(n);r&&1===n.nodeType&&(!0===r||r(n))?(a[++i]=o,a[++i]=""):("string"==typeof o[0]&&(a[i]+=o.shift()),o.length&&(a[++i]=o,a[++i]=""))}else a[i]+=n.data}while(n=n.nextSibling);return a}var t=this.options.filterElements,r=this.options.forceContext;return e(this.node)},processMatches:function(){var e,t,r,n=this.matches,a=this.node,i=this.options.filterElements,o=[],s=a,c=n.shift(),u=0,d=0,l=0,f=[a];e:for(;;){if(3===s.nodeType&&(!t&&s.length+u>=c.endIndex?t={node:s,index:l++,text:s.data.substring(c.startIndex-u,c.endIndex-u),indexInMatch:u-c.startIndex,indexInNode:c.startIndex-u,endIndexInNode:c.endIndex-u,isEnd:!0}:e&&o.push({node:s,index:l++,text:s.data,indexInMatch:u-c.startIndex,indexInNode:0}),!e&&s.length+u>c.startIndex&&(e={node:s,index:l++,indexInMatch:0,indexInNode:c.startIndex-u,endIndexInNode:c.endIndex-u,text:s.data.substring(c.startIndex-u,c.endIndex-u)}),u+=s.data.length),r=1===s.nodeType&&i&&!i(s),e&&t){if(s=this.replaceMatch(c,e,o,t),u-=t.node.data.length-t.endIndexInNode,e=null,t=null,o=[],c=n.shift(),l=0,d++,!c)break}else if(!r&&(s.firstChild||s.nextSibling)){s.firstChild?(f.push(s),s=s.firstChild):s=s.nextSibling;continue}for(;;){if(s.nextSibling){s=s.nextSibling;break}if((s=f.pop())===a)break e}}},revert:function(){for(var e=this.reverts.length;e--;)this.reverts[e]();this.reverts=[]},prepareReplacementString:function(e,t,r){var n=this.options.portionMode;return"first"===n&&t.indexInMatch>0?"":(e=e.replace(/\$(\d+|&|`|')/g,function(e,t){var n;switch(t){case"&":n=r[0];break;case"`":n=r.input.substring(0,r.startIndex);break;case"'":n=r.input.substring(r.endIndex);break;default:n=r[+t]}return n}),"first"===n?e:t.isEnd?e.substring(t.indexInMatch):e.substring(t.indexInMatch,t.indexInMatch+t.text.length))},getPortionReplacementNode:function(e,t){var r=this.options.replace||"$&",n=this.options.wrap;if(n&&n.nodeType){var a=o.createElement("div");a.innerHTML=n.outerHTML||(new XMLSerializer).serializeToString(n),n=a.firstChild}if("function"==typeof r)return r=r(e,t),r&&r.nodeType?r:o.createTextNode(String(r));var i="string"==typeof n?o.createElement(n):n;return r=o.createTextNode(this.prepareReplacementString(r,e,t)),r.data&&i?(i.appendChild(r),i):r},replaceMatch:function(e,t,r,n){var a,i,s=t.node,c=n.node;if(s===c){var u=s;t.indexInNode>0&&(a=o.createTextNode(u.data.substring(0,t.indexInNode)),u.parentNode.insertBefore(a,u));var d=this.getPortionReplacementNode(n,e);return u.parentNode.insertBefore(d,u),n.endIndexInNode<u.length&&(i=o.createTextNode(u.data.substring(n.endIndexInNode)),u.parentNode.insertBefore(i,u)),u.parentNode.removeChild(u),this.reverts.push(function(){a===d.previousSibling&&a.parentNode.removeChild(a),i===d.nextSibling&&i.parentNode.removeChild(i),d.parentNode.replaceChild(u,d)}),d}a=o.createTextNode(s.data.substring(0,t.indexInNode)),i=o.createTextNode(c.data.substring(n.endIndexInNode));for(var l=this.getPortionReplacementNode(t,e),f=[],p=0,g=r.length;p<g;++p){var _=r[p],v=this.getPortionReplacementNode(_,e);_.node.parentNode.replaceChild(v,_.node),this.reverts.push(function(e,t){return function(){t.parentNode.replaceChild(e.node,t)}}(_,v)),f.push(v)}var h=this.getPortionReplacementNode(n,e);return s.parentNode.insertBefore(a,s),s.parentNode.insertBefore(l,s),s.parentNode.removeChild(s),c.parentNode.insertBefore(h,c),c.parentNode.insertBefore(i,c),c.parentNode.removeChild(c),this.reverts.push(function(){a.parentNode.removeChild(a),l.parentNode.replaceChild(s,l),i.parentNode.removeChild(i),h.parentNode.replaceChild(c,h)}),h}},t}()}(Retreaver.Vendor);